<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Vocabulary Quiz</title>
<style>
  /* ======= базовая стилизация ======= */
  body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;max-width:900px;margin:0 auto;padding:20px;background:#f8f9fa;color:#333}
  h1{text-align:center;color:#2c3e50;margin-bottom:30px;font-size:2.5em}
  .quiz-section{background:#fff;padding:25px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin-bottom:30px}
  .quiz-item{margin-bottom:25px;padding:20px;border-left:4px solid #3498db;background:#f8fafc;border-radius:5px}
  .question{font-weight:bold;font-size:1.1em;margin-bottom:15px;color:#2c3e50}
  .options{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .option{padding:12px 15px;border:2px solid #ddd;border-radius:6px;cursor:pointer;text-align:center;transition:.2s}
  .option:hover{background:#f1f5f9;border-color:#b3cde0}
  .option.selected{border-color:#3498db;background:#e1f0fa;font-weight:bold}
  .option.correct{background:#d4edda;border-color:#c3e6cb;color:#155724}
  .option.incorrect{background:#f8d7da;border-color:#f5c6cb;color:#721c24}
  .feedback{margin-top:15px;padding:12px;border-radius:6px;display:none;font-size:.95em}
  .feedback.correct{background:#d4edda;color:#155724}
  .feedback.incorrect{background:#f8d7da;color:#721c24}
  .chinese{display:block;margin-top:8px;font-style:italic;color:#6c757d}
  .check-btn{display:block;margin:30px auto;padding:14px 30px;background:linear-gradient(135deg,#3498db,#2c3e50);color:#fff;border:none;border-radius:30px;font-size:1.1em;cursor:pointer;transition:.3s;box-shadow:0 4px 8px rgba(0,0,0,.1)}
  .check-btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.15)}
  .results{margin-top:30px;padding:25px;background:#e8f4f8;border-radius:10px;text-align:center;font-size:1.2em;display:none;border:2px solid #bbdefb}
  .score{font-weight:bold;margin-top:10px;font-size:1.4em;color:#2c3e50}
  .progress-container{width:100%;background:#e0e0e0;border-radius:10px;margin:20px 0;height:20px}
  .progress-bar{height:100%;border-radius:10px;background:linear-gradient(90deg,#4caf50,#8bc34a);transition:width .5s}
</style>
</head>
<body>
<h1>Advanced Vocabulary Quiz</h1>

<!-- единый контейнер вопросов -->
<div id="quiz-container" class="quiz-section"></div>

<button id="check-btn" class="check-btn">Check All Answers</button>

<!-- блок результата -->
<div id="results" class="results">
  <div id="score-text" class="score"></div>
  <div id="message-text"></div>
  <div class="progress-container"><div id="progress-bar" class="progress-bar"></div></div>
</div>

<script>
/* ---------- 1. данные (без уровней) ---------- */
const vocabulary = [
  {sentence:"He drank too much ______ at the party.", option:"alcohol", chinese:"酒精"},
  {sentence:"I ______ your kindness.", option:"appreciate", chinese:"感激"},
  {sentence:"She wiped her sweaty ______.", option:"brow", chinese:"额头"},
  {sentence:"He clutched his ______ in pain.", option:"chest", chinese:"胸部"},
  {sentence:"Environmental pollution is a major ______.", option:"concern", chinese:"关切"},
  {sentence:"Let me ______ you on your success!", option:"congratulate", chinese:"祝贺"},
  {sentence:"______ all possibilities first.", option:"Consider", chinese:"考虑"},
  {sentence:"It was ______ of you to ask.", option:"considerate", chinese:"体贴的"},
  {sentence:"The shop is around the ______.", option:"corner", chinese:"角落"},
  {sentence:"Order at the ______.", option:"counter", chinese:"柜台"},
  {sentence:"University ______.", option:"faculty", chinese:"教职员工"},
  {sentence:"A ______ of pottery.", option:"fragment", chinese:"碎片"},
  {sentence:"______ electricity.", option:"generate", chinese:"发电"},
  {sentence:"______ from college.", option:"graduate", chinese:"毕业"},
  {sentence:"______ coffee beans.", option:"grind", chinese:"磨碎"},
  {sentence:"______ replacement.", option:"hip", chinese:"髋部"},
  {sentence:"Crimes against ______.", option:"humanity", chinese:"人性"},
  {sentence:"______ understood.", option:"implicitly", chinese:"含蓄地"},
  {sentence:"Total ______.", option:"incompetence", chinese:"无能"},
  {sentence:"______ will happen.", option:"inevitably", chinese:"不可避免地"},
  /* ---- добавьте остальные слова по желанию ---- */
];

/* ---------- 2. переменные состояния ---------- */
let userAnswers = {};      // {index: слово}
let quizSubmitted = false; // блокировка после проверки

/* ---------- 3. DOM-элементы ---------- */
const quizContainer = document.getElementById('quiz-container');
const checkBtn       = document.getElementById('check-btn');
const resultsEl      = document.getElementById('results');
const scoreText      = document.getElementById('score-text');
const messageText    = document.getElementById('message-text');
const progressBar    = document.getElementById('progress-bar');

/* ---------- 4. инициализация викторины ---------- */
function initQuiz() {
  quizContainer.innerHTML = '';

  vocabulary.forEach((item, idx) => {
    /* блок вопроса */
    const quizItem = document.createElement('div');
    quizItem.className = 'quiz-item';
    quizItem.dataset.index = idx;

    /* текст вопроса */
    const q = document.createElement('div');
    q.className = 'question';
    q.textContent = `${idx + 1}. ${item.sentence}`;

    /* варианты */
    const optsWrap = document.createElement('div');
    optsWrap.className = 'options';

    /* собираем 3 случайных неправильных + 1 правильный */
    let opts = [item.option];
    while (opts.length < 4) {
      const rand = vocabulary[Math.floor(Math.random() * vocabulary.length)].option;
      if (!opts.includes(rand)) opts.push(rand);
    }
    opts = shuffleArray(opts);

    opts.forEach(opt => {
      const optEl = document.createElement('div');
      optEl.className = 'option';
      optEl.textContent = opt;
      optEl.addEventListener('click', () => selectOption(optEl, idx, opt));
      optsWrap.appendChild(optEl);
    });

    /* блок обратной связи */
    const feedback = document.createElement('div');
    feedback.className = 'feedback';
    feedback.id = `feedback-${idx}`;

    /* собираем карточку */
    quizItem.appendChild(q);
    quizItem.appendChild(optsWrap);
    quizItem.appendChild(feedback);
    quizContainer.appendChild(quizItem);
  });
}

/* ---------- 5. выбор варианта ---------- */
function selectOption(optEl, qIdx, chosen) {
  if (quizSubmitted) return;

  /* снимаем выделение с других вариантов */
  const quizItem = optEl.closest('.quiz-item');
  quizItem.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));

  optEl.classList.add('selected'); // выделяем
  userAnswers[qIdx] = chosen;      // сохраняем ответ
}

/* ---------- 6. проверка всех ответов ---------- */
function checkAllAnswers() {
  if (quizSubmitted) return;

  quizSubmitted = true;
  let correct = 0;
  const total = vocabulary.length;

  vocabulary.forEach((item, idx) => {
    const userAnswer = userAnswers[idx];
    const correctAnswer = item.option;
    const feedback = document.getElementById(`feedback-${idx}`);
    const quizItem = document.querySelector(`.quiz-item[data-index="${idx}"]`);
    const opts = quizItem.querySelectorAll('.option');

    /* подсветка правильного */
    opts.forEach(o => o.textContent === correctAnswer && o.classList.add('correct'));

    if (userAnswer === correctAnswer) {
      correct++;
      feedback.innerHTML = `Correct! <span class="chinese">${item.chinese}</span>`;
      feedback.classList.add('correct');
    } else if (userAnswer) {
      feedback.innerHTML = `Incorrect! Correct answer: ${correctAnswer} <span class="chinese">${item.chinese}</span>`;
      feedback.classList.add('incorrect');
      /* подсветим ошибочный выбор */
      opts.forEach(o => o.textContent === userAnswer && o.classList.add('incorrect'));
    } else {
      feedback.innerHTML = `No answer. Correct: ${correctAnswer} <span class="chinese">${item.chinese}</span>`;
      feedback.classList.add('incorrect');
    }
    feedback.style.display = 'block';
  });

  /* вывод результата */
  showResults(correct, total);
}

/* ---------- 7. вывод прогресса ---------- */
function showResults(correct, total) {
  const percent = Math.round((correct / total) * 100);
  progressBar.style.width = `${percent}%`;
  scoreText.textContent   = `${correct} / ${total} correct (${percent}%)`;

  let msg = 'Nice try! Review and try again.';
  if (percent === 100) msg = "Perfect score! You're a vocabulary master!";
  else if (percent >= 80) msg = 'Excellent job! You know most of these words well!';
  else if (percent >= 60) msg = 'Good effort! Keep practicing to improve!';

  messageText.textContent = msg;
  resultsEl.style.display = 'block';
  resultsEl.scrollIntoView({behavior:'smooth'});
}

/* ---------- 8. утилита shuffle ---------- */
function shuffleArray(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

/* ---------- 9. запуск ---------- */
window.onload = () => {
  initQuiz();
  checkBtn.addEventListener('click', checkAllAnswers);
};
</script>
</body>
</html>
